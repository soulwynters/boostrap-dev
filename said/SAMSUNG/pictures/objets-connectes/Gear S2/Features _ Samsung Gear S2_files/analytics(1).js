(function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,f){var d;if(this==null){throw new TypeError('"this" is null or not defined')}var g=Object(this);var c=g.length>>>0;if(c===0){return -1}var h=+f||0;if(Math.abs(h)===Infinity){h=0}if(h>=c){return -1}d=Math.max(h>=0?h:c-Math.abs(h),0);while(d<c){if(d in g&&g[d]===e){return d}d++}return -1}}var a=function(){if(!(this instanceof a)){return new a()}window.flixJsCallbacks=window.flixJsCallbacks||{};this.curryTag=this.addTag.bind(this,null,"//t.flix360.com/?f=flixgvid","flixgvid");this.pagedata={};this.addGlobals();this._baseUrl="//media.flixcar.com/";this._urls={append:this._baseUrl+"delivery/static/distributor/DIST_ID/append.js","pagedata-specific":this._baseUrl+"delivery/static/distributor/DIST_ID/pagedata-specific.js",file_check:this._baseUrl+"delivery/analytics/jx_analytics_check/DIST_ID"};this._scripts={append:false,"pagedata-specific":false};this._delay=3000;this.params={};this.errLog();this.scriptTag=document.querySelector('script[src$="media.flixcar.com/js/analytics.js"]')};a.prototype.flow=function(e,c){var d=this;this.factory=function(){var h;return function g(){if(h){return}h=true;var k=e.shift();if(k){var i=Array.prototype.slice.call(arguments);var j=i.shift();if(j){c(j);return}i.push(d.factory());k.apply(d,i)}else{c.apply(d,arguments)}}};var f=this.factory();f()};a.prototype.getAttrs=function(e){for(var d=0,c=this.scriptTag.attributes.length;d<c;d++){if(this.scriptTag.attributes[d].name!=="src"){this.params[this.scriptTag.attributes[d].name.replace(/data-flix-/,"")]=this.scriptTag.attributes[d].nodeValue}}e(false)};a.prototype.xhr=function(e,i,f,c){var d=this;if(typeof this.params.distributor==="undefined"){f("no distributor_id provided")}var i=i;function g(){var k;if(window.ActiveXObject){try{k=new ActiveXObject("Microsoft.XMLHTTP")}catch(j){console.log(j.message);k=null}}else{k=new XMLHttpRequest()}return k}var h=g();h.onreadystatechange=function(){if(h.readyState===4){if(!!i){i.call(d,h.responseText,f,c)}return h.responseText}};h.open("GET",this._urls[e].replace(/DIST_ID/,this.params.distributor),true);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send()};a.prototype.getRemoteScripts=function(g){if(!this.featureDetect("cors")){g(false);return false}var e,d,f,c=true;this.xhr("file_check",function(h){var i=JSON.parse(h);if(!!i["pagedata-specific"]||!i.append){c=false}if(!!i.append){this._scripts.append=true;this.xhr("append",function(l,k,j){var k=(j)?k:null;this.addTag(l,null,"append",k)},g,c)}if(!!i["pagedata-specific"]){c=true;this._scripts["pagedata-specific"]=true;this.xhr("pagedata-specific",function(l,k,j){var k=(j)?k:null;this.addTag(l,null,"pagedata-specific",k)},g,c)}if(!i.append&&!i["pagedata-specific"]){g(false)}},g,null)};a.prototype.featureDetect=function(c){if(!c){return false}if(c==="cors"){if("withCredentials" in new XMLHttpRequest()){return true}else{if(typeof XDomainRequest!=="undefined"){return false}else{return false}}}if(c==="querySelector"){if(document.all&&!document.querySelector){return false}return true}};a.prototype.addTag=function(e,i,j,g){var h=10,f=document.getElementsByTagName("head")[0],d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("async","true");d.id=j;d.setAttribute("src",i);if(!e){f.appendChild(d);f.removeChild(d);(function c(){if(typeof window.flixJsCallbacks.gvid==="undefined"){window.flixgvid=function(l){try{delete window.flixgvid;window.flixJsCallbacks.gvid=l.gvid}catch(k){}};setTimeout(c,100);h--}else{g(false)}}())}else{if(this.featureDetect("cors")){d.setAttribute("crossorigin","true")}d.text=e;f.appendChild(d);f.removeChild(d);g(false)}};a.prototype.errLog=function(h){try{var h=h||null,f,c=this;function d(i){if(!i){return}if(i.filename&&/flix(facts|car|syndication|360)\./g.test(i.filename)){var e=i.colno?"l:"+i.lineno+", c:"+i.colno:"l:"+i.lineno;e+=" "+window.location.href;f=new Image;f.src="//rt.flix360.com/jserr?f="+encodeURIComponent(i.filename)+"&d="+encodeURIComponent(e)+"&m="+encodeURIComponent(i.message)}else{if(!!h){f=new Image;f.src="//rt.flix360.com/jserr?f=analytics.js&d="+encodeURIComponent(c.params.distributor)+"&m="+encodeURIComponent(h)}}}window.addEventListener("error",d(err));if(typeof h!=="undefined "){d(h)}}catch(g){}};a.prototype.getCanonical=function(d){try{var f,c,g;f=this.parsePage(this.pagedata,"pn");c=window.location.protocol+"//"+window.location.hostname+"/";if(!f||f===c||f.length+1<=c.length){f=document.URL}g=f.indexOf("#");if(g!=-1){f=f.substring(0,g)}return f}catch(h){}};a.prototype.parsePrice=function(g){try{if(!!g&&!g.trim().match(/[a-z][\.,\u20AC]+/gi)){var h=g.trim().replace(/[^0-9\.,\u20AC]/gi,""),c=h.length,f,d="";switch(true){case (!!h.charAt(c-3).match(/[\.,\u20AC]/)):h=h.substr(0,(c-3))+"*"+h.substr((c-2));break;case (!!h.charAt(c-2).match(/[\.,\u20AC]/)):h=h.substr(0,(c-2))+"*"+h.substr((c-1));break;default:h=h.split(".");f=(h.length-1);if(h.length>1&&h[f].length>2){h[f]=h[f].substr(0,2)}for(var e=0,f=h.length;e<f;e++){(e==(f-2))?d+=h[e]+"*":d+=h[e]}h=d;break}h=h.replace(/[\.,\u20AC]+/g,"");h=h.replace(/\*/,".");return h}}catch(j){}return false};a.prototype.parsePage=function(s,q){var v="",l=null,m=true,t={},n={},f,r=["ti","h1"],d,c=false;try{for(f in s){if(s.hasOwnProperty(f)){if(f=="pageSpecific"){n=s.pageSpecific}else{if(r.indexOf(f)===-1){t[f]=s[f]}}}}d=(!!n[q])?n[q]:t[q];if(!n[q]){m=false}if(typeof d==="function"){v=d();if(!v){m=true}}if(!v&&!!d&&!!d.terms&&d.terms.length){for(var k=0;k<d.terms.length;k++){l=document.querySelector(d.terms[k]);if(l&&!!l.textContent.trim()){c=true;break}else{if(l&&l instanceof HTMLElement){for(var g=0;g<d.attr.length;g++){if(l.hasAttribute(d.attr[g])){v=l.getAttribute(d.attr[g]);c=true;break}}}}}}if(m&&!c){d=t[q];if(typeof d==="function"){v=d()}if(!v&&!!d&&!!d.terms&&d.terms.length){for(var k=0;k<d.terms.length;k++){l=document.querySelector(d.terms[k]);if(l&&!!l.textContent.trim()){c=true;break}else{if(l&&l instanceof HTMLElement){for(var g=0;g<d.attr.length;g++){if(l.hasAttribute(d.attr[g])){v=l.getAttribute(d.attr[g]);c=true;break}}}}}}}if(!v&&l&&l instanceof HTMLElement){v=l.textContent.trim()}if(q==="price"&&!!v){var u=this.parsePrice(v);if(u){v=u}}return v.trim()}catch(o){return""}};a.prototype.pageData=function(c){try{PAGEDATALOOP:for(var d in this.pagedata){if(this.pagedata.hasOwnProperty(d)){switch(d){case"pageSpecific":continue PAGEDATALOOP;break;case"pn":this.params[d]=this.getCanonical();break;case"ti":case"h1":this.params[d]=(!!document.getElementsByTagName(this.pagedata[d].terms)[0])?document.getElementsByTagName(this.pagedata[d].terms)[0].textContent.trim():"";break;case"br":default:this.params[d]=this.parsePage(this.pagedata,d);break}}}}catch(e){}};a.prototype.addGlobals=function(){var c=this;window.flixJsCallbacks.flixCartClick=function(e,g,h){if(e!=="alert"){var f=document.querySelectorAll(e);var d=Array.prototype.slice.call(f,0)}if(e==="alert"||!d.length){c.log({et:"alert",ed:"a2cX"})}else{d.forEach(function(i){if(document!=="undefined"&&"classList" in document.documentElement){if(!i.classList.contains("flix_cart_click_check")){i.classList.add("flix_cart_click_check")}}else{if(i.className===""){i.className="flix_cart_click_check"}else{if(!i.className.test("flix_cart_click_check")){i.className+=" flix_cart_click_check"}}}i.onmousedown=function(j){j=j||window.event;c.log({et:"cart_click",ed:1})}})}};this.pagedata={br:{terms:[".fpLinkBrandProducts[title]",'[itemprop="brand"]','[itemprop="brand"][content]',"[data-brand]",".specification","[brandname]",'[itemprop="manufacturer"]',".brand","#productBrandName[value]"],attr:["title","content","data-brand","brandname","value"]},price:{terms:['[property="og:price:amount"][content]','[itemprop="price"]','[itemprop="generic"]','[itemprop="price"][content]',".finalprice",".price-current-label",".fpPriceBig",".prijs",".price",".pdp-price-total",".pounds",".pricelarge","[data-price]"],attr:["content"]},ref:function(){return document.referrer||""},currency:{terms:['[property="og:price:currency"][content]','[itemprop="priceCurrency"][content]',".currency[title]",".value-title[title]",".currency"],attr:["content","title"]},pn:{terms:['[property="og:url"][content]','[rel="canonical"][href]'],attr:["content","href"]},h1:{terms:"h1"},ti:{terms:"title"},img:{terms:['[property="og:image"]'],attr:["content"]},"r1.cat":"",om:{}}};a.prototype.process=function(f){var c=[],g,e={distributor:"d",language:"l",event_type:"et",event_detail:"ed"};for(var d in this.params){if(this.params.hasOwnProperty(d)){g=(typeof e[d]!=="undefined")?e[d]:d;c.push(g+"="+this.params[d])}}for(var d in f){if(f.hasOwnProperty(d)&&!this.params[d]){g=(typeof e[d]!=="undefined")?e[d]:d;c.push(g+"="+f[d])}}return c.join("&")};a.prototype.log=function(o){var f,c,h=null,l=new Date(),n="//media.flixcar.com/analytics/log.gif",j="//rt.flix360.com/beat",m=[],g=[],k,h=null;var i={et:"analytics",ut:l.setMinutes(l.getTimezoneOffset()),gvid:window.flixJsCallbacks.gvid};if(typeof o!=="undefined"){for(var e in o){if(i.hasOwnProperty(e)){i[e]=o[e]}}}this.pagedata.pageSpecific=window.flixJsCallbacks.pageSpecific||null;this.pageData();c=n;if(typeof window.flixJsCallbacks.imgCache==="undefined"){window.flixJsCallbacks.imgCache={}}f="img_"+(new Date()).getTime();window.flixJsCallbacks.imgCache[f]=new Image();h=n+"?"+this.process(i);window.flixJsCallbacks.imgCache[f].src=(!!h)?h:c;if(m.indexOf(+this.params.distributor)<0&&i.et!=="alert"){setTimeout(function(){k="img_"+(new Date()).getTime()},0);window.flixJsCallbacks.imgCache[k]=new Image();window.flixJsCallbacks.imgCache[k].src=j+h.replace(n,"")}};function b(){if(!!document.querySelector){var c=new a();c.flow([c.curryTag,c.getAttrs,c.getRemoteScripts,c.log],c.err)}}if(document.readyState!=="complete"){document.onreadystatechange=function(){if(document.readyState=="complete"){b()}}}else{b()}}());